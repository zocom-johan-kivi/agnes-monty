import{d as V,b as M,r as p,e as Y,w as j,o as s,c as u,u as I,a as o,t as _,f as h,F as z,g as K,h as N,n as w,i as L,j as W,k as C,l as q}from"./index.aecba8cc.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";const G=V("system",{state:()=>({where:{currentLesson:null,lesson:"",step:0},pluginState:{currentAction:"",mode:""},previousAction:"0",playerState:{currentState:"",currentCuepoint:{},seek:0,timeupdate:{seconds:0,percent:0,duration:0}}}),actions:{controllerEvent(n){this.playerState.currentState=n.type,this.playerState.seek=n.time||0},playerEvent(n){this.playerState.timeupdate=n}}});var S=(n=>(n.VIDEO="video",n.INTERACTIVE="interactive",n))(S||{}),E=(n=>(n.PLAY="play",n.INTERACTIVE="interactive",n))(E||{});const J=[{id:"1",order:1,title:"Sannolikhetsl\xE4ra intro",desc:"En lektion om ditt och datt, fast slumpm\xE4ssigt och lite matte ocks\xE5. Det blir skoj.",steps:[{id:"1",order:1,type:S.INTERACTIVE,title:"Step 1",pluginName:"montyHall",meta:{videoUrl:"https://vimeo.com/773503297/d738a9eb10",cuePoints:[{time:43,actionId:"1"},{time:43.3,actionId:"2"},{time:43.6,actionId:"3"},{time:46,actionId:"4"},{time:46.5,actionId:"5"},{time:51,actionId:"6"},{time:58,actionId:"7"},{time:58.5,actionId:"8"},{time:59,actionId:"9"},{time:63,actionId:"10"},{time:70,actionId:"11"},{time:113,actionId:"12"}]}},{id:"2",order:2,type:S.INTERACTIVE,title:"Step 2",pluginName:"presentation",meta:{videoUrl:"https://vimeo.com/773503386/eaa9a5db1f",cuePoints:[{time:11,actionId:"1"},{time:69,actionId:"2"}]}},{id:"3",order:3,type:S.VIDEO,title:"Step 3",pluginName:"video",meta:{videoUrl:"https://vimeo.com/773503448/f58562203a",cuePoints:[{time:15,actionId:"1"}]}}],plugins:[{id:"p1",title:"montyHall",mode:E.PLAY,actions:[{actionId:"1",actionData:{eventName:"showDoor",eventParams:0}},{actionId:"2",actionData:{eventName:"showDoor",eventParams:1}},{actionId:"3",actionData:{eventName:"showDoor",eventParams:2}},{actionId:"4",actionData:{eventName:"openDoor",eventParams:0}},{actionId:"5",actionData:{eventName:"openDoor",eventParams:1}},{actionId:"6",actionData:{eventName:"openDoor",eventParams:2}},{actionId:"7",actionData:{eventName:"openDoor",eventParams:0}},{actionId:"8",actionData:{eventName:"openDoor",eventParams:1}},{actionId:"9",actionData:{eventName:"openDoor",eventParams:2}},{actionId:"10",actionData:{eventName:"selectDoor",eventParams:1}},{actionId:"11",actionData:{eventName:"openDoor",eventParams:0}},{actionId:"12",actionData:{eventName:"toggleInteractiveMode",eventParams:!0}}]},{id:"p2",title:"presentation",mode:E.PLAY,actions:[{actionId:"1",actionData:{displayAs:"ordered",eventName:"listBullets",shouldPause:!0,values:[{displayText:"St\xE5 kvar vid mitt val",value:"St\xE5 kvar vid mitt val"},{displayText:"50 / 50",value:"50 / 50"},{displayText:"Byt alltid d\xF6rr",value:"Byt alltid d\xF6rr"}]}},{actionId:"2",actionData:{displayAs:"ordered",eventName:"next"}}]}]}],Q=V("lesson",{state:()=>({lessons:[]}),actions:{async fetchLessons(){this.lessons=J}},getters:{getLesson:n=>d=>n.lessons.find(D=>D.id===d)}}),X={class:"plugin-wrapper"},Z={key:0,class:"stats"},ee=N("strategi: "),te=N("omg\xE5ng: "),ae=N("wins: "),ne=N("hitrate: "),oe=["data-mode"],se=["onClick"],ie={key:1,class:"controls"},le=M({__name:"MontyHallPlugin",setup(n){const d=L(),D=W(),i=G(),g=Q();i.pluginState.mode="interactive";const f=p(0),y=p(0),k=p(0),R=p(["","",""]),P=p(!1),x=Y(()=>{const e=y.value/f.value*100;return isNaN(e)?"0%":`${e.toFixed(0)}%`}),a=p([{id:1,visible:!0,highlighted:!1,face:"A",open:!1,selected:!1,winner:!1},{id:2,visible:!0,highlighted:!1,face:"B",open:!1,selected:!1,winner:!1},{id:3,visible:!0,highlighted:!1,face:"C",open:!1,selected:!1,winner:!0}]);function F(e){a.value[e].visible=!a.value[e].visible}function b(e){i.pluginState.mode==="play"&&(a.value[e].selected=!0),i.pluginState.mode==="interactive"&&(a.value.filter(t=>t.selected).length>0?(a.value.map(t=>t.selected=!1),a.value[e].selected=!0,setTimeout(()=>{for(let t=0;t<a.value.length;t++)a.value[t].open=!0;O()},500)):(a.value[e].selected=!0,setTimeout(()=>{const t=a.value.filter(c=>!c.selected&&!c.winner),r=a.value.findIndex(c=>c.id===t[Math.floor(Math.random()*t.length)].id);T(r)},500)))}function H(e){a.value[e].highlighted=!a.value[e].highlighted,setTimeout(()=>{a.value[e].highlighted=!a.value[e].highlighted},500)}function T(e){a.value[e].open=!a.value[e].open}function O(){const e=a.value.findIndex(t=>t.winner),l=a.value.findIndex(t=>t.selected);e===l?(console.log("WIN!"),y.value++):console.log("LOOSE!"),f.value++,f.value>10&&(P.value=!0),setTimeout(()=>{$()},2e3)}function $(){a.value.map(e=>{e.open=!1}),setTimeout(()=>{a.value.map(l=>{l.winner=!1,l.selected=!1,l.visible=!0});const e=Math.floor(Math.random()*a.value.length);a.value[e].winner=!0},300)}function U(){R.value[+k]=x.value,k.value++,f.value=0,y.value=0,P.value=!1,D.push("/lessons/1/2")}return j(i.pluginState,e=>{var A;const l=e.currentAction,t=g.lessons.findIndex(m=>m.id===d.params.id),r=g.lessons[t].steps.find(m=>m.id===d.params.step),c=g.lessons[t].plugins.find(m=>m.title===(r==null?void 0:r.pluginName)),v=(A=c==null?void 0:c.actions.find(m=>m.actionId===l))==null?void 0:A.actionData;if(v)switch(v.eventName){case"showDoor":F(v.eventParams);break;case"openDoor":T(v.eventParams);break;case"highlightDoor":H(v.eventParams);break;case"selectDoor":b(v.eventParams);break;case"toggleInteractiveMode":i.pluginState.mode="interactive",i.playerState.currentState="pause";break}}),(e,l)=>(s(),u("section",X,[I(i).pluginState.mode==="interactive"?(s(),u("header",Z,[o("p",null,[ee,o("span",null,_(k.value+1),1)]),o("p",null,[te,o("span",null,_(f.value),1)]),o("p",null,[ae,o("span",null,_(y.value),1)]),o("p",null,[ne,o("span",null,_(I(x)),1)])])):h("",!0),o("section",{class:"stage","data-mode":I(i).pluginState.mode},[(s(!0),u(z,null,K(a.value,(t,r)=>(s(),u("article",{class:w(["door-container",[{selected:t.selected},{highlighted:t.highlighted}]]),key:r,onClick:c=>b(r)},[t.visible?(s(),u("section",{key:0,class:w(["content",{winner:t.winner}])},null,2)):h("",!0),t.visible?(s(),u("section",{key:1,class:w(["door",{open:t.open}])},_(t.face),3)):h("",!0)],10,se))),128))],8,oe),P.value?(s(),u("footer",ie,[o("button",{onClick:U},"K\xE4nner mig r\xE4tt klar...")])):h("",!0)]))}});const ce=B(le,[["__scopeId","data-v-346d9d38"]]),re={class:"plugin-container"},ue=M({__name:"PluginView",setup(n){const d=L();return(D,i)=>{const g=q("SlotMachine");return s(),u("main",re,[I(d).params.name==="montyhall"?(s(),C(ce,{key:0})):h("",!0),I(d).params.name==="slotmachine"?(s(),C(g,{key:1})):h("",!0)])}}});const ve=B(ue,[["__scopeId","data-v-33e7c9a1"]]);export{ve as default};
